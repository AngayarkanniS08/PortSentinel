version: '3.8'

services:
  port-sentinel:
    build: .
    image: portsentinel:latest
    container_name: portsentinel-app
    
    # --- IDHU DHAN MUKHYAMANA FIX ---
    # Unga real network-ah use panna sollum
    network_mode: "host"
    
    # Firewall (iptables) control panna permission kudukum
    privileged: true
    # ------------------------------------
    
    # 'host' network mode-la 'ports' theva illa
    # ports:
    #   - "5000:5000" 

    volumes:
      # Unga database 'instance' folder-la save aagum
      - ./instance:/app/instance
    
    environment:
      - FLASK_ENV=production
    
    stdin_open: true
    tty: true
    restart: unless-stopped