{% extends "layout.html" %}

{% block title %}Dashboard - Port Sentinel{% endblock %}

{% block content %}

<div class="stats-grid">
    <div class="stat-card glass-card">
        <div class="stat-header">
            <h3 class="stat-title">Packets Processed</h3>
            <div class="stat-icon icon-blue"><i class="fas fa-network-wired"></i></div>
        </div>
        <div class="stat-value" id="packets-processed">0</div>
        <div class="progress-bar">
            <div class="progress-value" id="packets-progress-bar" style="width: 0%"></div>
        </div>
        <p class="stat-title">Current traffic load</p>
    </div>
    
    <div class="stat-card glass-card">
        <div class="stat-header">
            <h3 class="stat-title">Alerts Triggered</h3>
            <div class="stat-icon icon-red"><i class="fas fa-exclamation-triangle"></i></div>
        </div>
        <div class="stat-value text-red-400" id="alerts-triggered">0</div>
        <div class="progress-bar">
            <div class="progress-value" id="alerts-progress-bar" style="width: 0%; background: var(--danger);"></div>
        </div>
        <p class="stat-title">Alerts vs Goal (50)</p>
    </div>
    
    <div class="stat-card glass-card">
        <div class="stat-header">
            <h3 class="stat-title">Detected IPs</h3>
            <div class="stat-icon icon-amber"><i class="fas fa-desktop"></i></div>
        </div>
        <div class="stat-value text-amber-400" id="detected-ips">0</div>
        <div class="progress-bar">
            <div class="progress-value" id="ips-progress-bar" style="width: 0%; background: var(--warning);"></div>
        </div>
        <p class="stat-title">IPs vs Goal (10)</p>
    </div>
    
    <div class="stat-card glass-card">
        <div class="stat-header">
            <h3 class="stat-title">Current Traffic</h3>
            <div class="stat-icon icon-green"><i class="fas fa-chart-line"></i></div>
        </div>
        <div class="stat-value text-green-400" id="current-traffic">0/s</div>
        <div class="progress-bar">
            <div class="progress-value" id="traffic-progress-bar" style="width: 0%; background: var(--secondary);"></div>
        </div>
        <p class="stat-title">Packets per second</p>
    </div>
</div>

<div class="two-column-layout">
    <div class="card glass-card">
        <div class="card-header"><i class="fas fa-chart-bar"></i>Detection Stats</div>
        <div class="card-body" style="padding: 30px;">
            <div class="detection-stats-item">
                <span class="detection-stats-label">Interface</span>
                <span id="stats-interface" class="detection-stats-value">N/A</span>
            </div>
            <div class="detection-stats-item">
                <span class="detection-stats-label">Uptime</span>
                <span id="stats-uptime" class="detection-stats-value">0m 0s</span>
            </div>
            <div class="detection-stats-item">
                <span class="detection-stats-label">Detection Accuracy</span>
                <span id="stats-accuracy" class="detection-stats-value high">0%</span>
            </div>
            <div class="detection-stats-item">
                 <div class="w-full">
                    <div class="flex justify-between items-center mb-2">
                        <span class="detection-stats-label">Traffic Load</span>
                        <span id="stats-traffic-load-value" class="detection-stats-value">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div id="stats-traffic-load-bar" class="progress-value" style="width: 0%;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card glass-card recent-detections-card">
        <div class="card-header"><i class="fas fa-list-alt"></i>Recent Detections</div>
        <div class="card-body">
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>IP Address</th>
                            <th>Scan Type</th>
                            <th>Severity</th>
                            <th>Threat Score</th>
                            <th>Action</th> 
                        </tr>
                    </thead>
                    <tbody id="detections-table-body">
                        <tr><td colspan="5" class="text-center p-8 text-slate-400">No detections yet.</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="ip-action-modal">
    <div class="modal-content">
        <h3 id="modal-title">Confirm Action</h3>
        <p id="modal-body">Are you sure you want to proceed?</p>
        <div class="modal-actions">
            <button class="btn btn-secondary" id="cancel-action-btn">Cancel</button>
            <button class="btn btn-danger" id="confirm-action-btn">Confirm</button>
        </div>
    </div>
</div>

{% endblock %}